# 本地测试 Ainski's Blog 指南

## 项目概述

Ainski's Blog 是一个基于 Jekyll 的静态博客网站，使用 GitHub Pages 托管。这个指南将帮助您在本地环境中搭建和测试博客。

## 系统要求

在开始之前，请确保您的系统已安装以下软件：

1. **Ruby** (版本 2.5.0 或更高)
2. **RubyGems**
3. **GCC 和 Make** (用于编译 Ruby 扩展)
4. **Git** (用于克隆项目)

## Windows 环境安装步骤

### 1. 安装 Ruby

对于 Windows 用户，推荐使用 [RubyInstaller](https://rubyinstaller.org/)：

1. 从 https://rubyinstaller.org/downloads/ 下载 Ruby+Devkit 版本
2. 运行安装程序并按照向导安装
3. 在安装过程中选择将 Ruby 添加到系统 PATH
4. 选择安装 MSYS2 开发工具包

安装完成后，打开命令提示符验证安装：

```bash
ruby --version
gem --version
```

### 2. 安装 Jekyll 和 Bundler

打开命令提示符（以管理员身份运行可能需要），执行以下命令：

```bash
gem install jekyll bundler
```

### 3. 克隆博客项目

如果您尚未克隆项目，可以使用以下命令：

```bash
git clone https://github.com/Ainski/ainski.github.io.git
cd ainski.github.io
```

### 4. 安装项目依赖

在项目根目录下运行以下命令安装所有依赖：

```bash
bundle install
```

> 注意：如果遇到 SSL 证书错误，可能需要配置 gem 的信任源。

### 5. 启动本地服务器

在项目根目录下运行以下命令启动本地服务器：

```bash
bundle exec jekyll serve
```

或者使用简写命令：

```bash
jekyll serve
# 或
bundle exec jekyll s
```

### 6. 访问本地博客

服务器启动后，您应该能看到类似以下的输出：

```
Server address: http://127.0.0.1:4000/
Server running... press ctrl-c to stop.
```

打开浏览器并访问 `http://127.0.0.1:4000/` 即可查看本地运行的博客。

## 常见问题及解决方案

### 问题 1: `bundle install` 失败

如果 `bundle install` 命令失败，请尝试：

1. 更新 RubyGems:
   ```bash
   gem update --system
   ```

2. 更新 Bundler:
   ```bash
   gem install bundler
   ```

3. 重新运行 `bundle install`

### 问题 2: 无法启动服务器

如果遇到错误，请检查 `_config.yml` 文件的格式是否正确，特别是缩进和特殊字符。

### 问题 3: 中文显示乱码

Jekyll 项目通常需要确保文件编码为 UTF-8。请确认您的编辑器以 UTF-8 编码保存文件。

### 问题 4: 插件兼容性问题

如果遇到插件问题，尝试运行：
```bash
bundle update
```

## 项目结构说明

- `_posts/` - 存放博客文章，文件名格式为 `YYYY-MM-DD-title.md`
- `_layouts/` - 页面布局模板
- `_config.yml` - 网站配置文件
- `index.html` - 主页
- `Gemfile` - Ruby 依赖管理文件（如果存在）

## 开发和测试

### 实时预览
当您运行 `jekyll serve` 时，Jekyll 会监控文件变化，并在文件更改时自动重新构建网站。

### 测试文章
您可以在 `_posts/` 目录下创建测试文章进行预览，注意命名格式和 YAML front matter（文件顶部的配置块）。

## 自定义配置

您可以在 `_config.yml` 中修改网站配置，如网站标题、描述、作者信息等，修改后需要重启服务器才能生效。

## 停止服务器

按 `Ctrl + C` 组合键可以停止本地服务器。

## 使用启动脚本 (Ubuntu)

在 Ubuntu 环境下，我们提供了一个便捷的启动脚本 `start_blog.sh`，可以自动执行所有必要的启动步骤：

1. 检查 Ruby 环境
2. 安装必要依赖 (Bundler, Jekyll)
3. 安装项目依赖 (bundle install)
4. 启动本地服务器

运行脚本：
```bash
./start_blog.sh
```

脚本执行后，您的博客将在 `http://127.0.0.1:4000` 上可用。

## 部署到 GitHub Pages

在本地测试无误后，您可以将更改推送到 GitHub，GitHub Pages 会自动构建和部署您的网站。

```bash
git add .
git commit -m "更新博客内容"
git push origin main
```

现在您的 Ainski's Blog 博客已经可以在本地正常运行和测试了！